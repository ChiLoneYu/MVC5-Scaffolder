<!-- Link to Google CDN's jQuery + jQueryUI; fall back to local -->
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>if (!window.jQuery) { document.write('<script src="/scripts/libs/jquery-3.2.1.min.js"><\/script>'); }</script>
<script src="~/Scripts/libs/jquery-ui-1.12.1.noConflict.min.js"></script>

<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)-->
<script data-pace-options='{ "restartOnRequestAfter": true }' src="~/scripts/plugin/pace/pace.min.js"></script>
<script src="~/Scripts/app.extend.min.js"></script>
@Scripts.Render("~/plugins/jqueryeasyuiextendjs")

<!-- IMPORTANT: SmartAdmin Core -->
@Scripts.Render("~/scripts/smartadmin")
@if (Request.IsAuthenticated)
{

  <!-- Demo purpose only! -->
  <script src="/scripts/demo.js"></script>
}

<!-- Voice command : plugin -->
@*<script src="~/scripts/speech/voicecommand.js"></script>*@
<!-- Full Calendar -->
@Scripts.Render("~/scripts/full-calendar")
<!-- signalrjs UI : plugin -->
@Scripts.Render("~/plugins/signalrjs");
<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>


@if (Request.IsAuthenticated)
{
  <!-- SmartChat UI : plugin -->
  <script src="~/Scripts/smart-chat-ui/smart.chat.min.js"></script>

}




<!-- DataTables : plugin -->
@*@Scripts.Render("~/scripts/datatables")*@

<!-- jQGrid : plugin -->
@*@Scripts.Render("~/scripts/jq-grid")*@

<!-- Forms : plugin -->
@*@Scripts.Render("~/scripts/forms")*@

<!-- Flot Chart Plugin: Flot Engine, Flot Resizer, Flot Tooltip, Morris, Sparkline, EasyPie -->
@Scripts.Render("~/scripts/charts")

<!-- Vector Maps Plugin: Vectormap engine, Vectormap language -->
@Scripts.Render("~/scripts/vector-map")


<!-- jQuery plugin to use the numpad plus key (configurable) as a tab key equivalent -->
<script src="~/Scripts/plugin/plusastab/plusastab.joelpurra.js"></script>
<script src="~/Scripts/plugin/plusastab/emulatetab.joelpurra.js"></script>







<!-- DO NOT REMOVE : GLOBAL FUNCTIONS! -->
<script type="text/javascript">
  $(document).ready(function () {
    pageSetUp();
    drawBreadCrumb();



    window.addEventListener('beforeunload', function (e) {
      e.preventDefault();
      if (hook) {
        e.returnValue = '';
      }
    });

    JoelPurra.PlusAsTab.setOptions({
      // Use enter instead of plus
      // Number 13 found through demo at
      // https://api.jquery.com/event.which/
      key: 13
    });
  });
  //提示是否保存数据
  var hook = false;
  

</script>

@if (@Model is HelperResult)
{
  @Model
}


<script type="text/javascript">
  $("#fakeLoader").fakeLoader({
    timeToHide: 1200,
    bgColor: "#34495e",
    spinner: "spinner4"
  });
  //paceOptions = {
  //    ajax: {
  //        trackMethods: ['GET', 'POST', 'DELETE', 'PUT', 'PATCH']
  //    }
  //};
  toastr.options = {
    "closeButton": true,
    "debug": false,
    "newestOnTop": false,
    "progressBar": true,
    "positionClass": "toast-bottom-right",
    "preventDuplicates": false,
    "onclick": null,
    "showDuration": "300",
    "hideDuration": "1000",
    "timeOut": "3000",
    "extendedTimeOut": "1000",
    "showEasing": "swing",
    "hideEasing": "linear",
    "showMethod": "fadeIn",
    "hideMethod": "fadeOut"
  }
  $(document).ajaxError((event, request, ajaxOptions, exception) => {
    var message;
    var url = ajaxOptions.url;
    var type = event.type;
    var method = ajaxOptions.type;
    var statusErrorMap = {
      '400': "Server understood the request, but request content was invalid.",
      '401': "Unauthorized access.",
      '403': "Forbidden resource can't be accessed.",
      '404': "Not Found.",
      '500': "Internal server error.",
      '503': "Service unavailable."
    };
    if (request.status) {
      message = statusErrorMap[request.status];
      if (!message) {
        message = "Unknown Error \n.";
      }
    } else if (exception === 'parsererror') {
      message = "Error.\nParsing JSON Request failed.";
    } else if (exception === 'timeout') {
      message = "Request Time out.";
    } else if (exception === 'abort') {
      message = "Request was aborted by the server";
    } else {
      message = "Unknown Error \n.";
    }


    toastr.error(`${method}:${url} <br> ${message}<br>请联系管理员  <i class='fa fa-envelope-o' aria-hidden='true'></i> : demo@admin.com`, `${type}`, { positionClass: 'toast-bottom-right' });




  });

    //window.onerror = function (msg, url, line, col, error) {
    //    console.log(msg);
    //    //$.post('/Messages/SaveErrorLog', { tags:'javascript',content: msg, url: url, line: line, col: col },
    //    //    function (data, status, xhr) {
    //    //});
    //}


</script>


